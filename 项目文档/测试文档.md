# BeeaNexus - 测试文档

## 5.1 测试计划

### 测试范围
本项目测试覆盖以下功能模块：
1. **用户管理**：注册、登录、登出、查看和更新个人资料。
2. **即时通讯**：发送消息、接收消息、查看历史消息、管理联系人（添加、删除、备注）。
3. **白名单管理**：提交白名单申请、审核白名单申请。
4. **排行榜系统**：查看金币排行榜和星星排行榜。
5. **签到系统**：每日签到、获取签到奖励。
6. **管理员功能**：用户管理、白名单审核。

### 测试策略
1. **单元测试**：
   - 针对核心功能模块编写单元测试，确保每个函数和类的逻辑正确。
   - 使用 Python 的 `unittest` 框架对服务端业务逻辑进行测试。
2. **集成测试**：
   - 测试客户端与服务端之间的交互，确保数据传输正确性和响应的及时性。
   - 验证数据库操作的正确性，包括数据的增删改查。
3. **系统测试**：
   - 在完整的测试环境中运行客户端和服务端，模拟真实用户场景。
   - 测试所有功能模块的集成效果，确保系统的稳定性和可靠性。

### 测试环境
1. **硬件环境**：
   - **开发机**：Intel i5 或以上处理器，8GB 内存，500GB 存储空间。
   - **测试服务器**：中低端云服务器（2核 CPU、4GB 内存、50GB 存储）。
2. **软件环境**：
   - **操作系统**：Windows 10/11（客户端）、Ubuntu Server 20.04 LTS（服务端）。
   - **编程语言**：Python 3.8+。
   - **数据库**：MySQL 8.0。
   - **依赖库**：PyQt5、mysql-connector-python、bcrypt、requests 等。
   - **测试工具**：Python `unittest` 框架、Postman（API 测试）、JMeter（性能测试）。

## 5.2 测试用例

### 功能测试用例

#### 1. 用户管理模块
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| FT-001   | 用户注册          | 1. 打开客户端，进入注册页面。<br>2. 输入有效用户名、密码、邮箱、手机号等信息。<br>3. 点击注册按钮。 | 1. 注册成功，显示欢迎信息。<br>2. 数据库中新增用户记录。                |
| FT-002   | 用户登录          | 1. 打开客户端，进入登录页面。<br>2. 输入有效用户名和密码。<br>3. 点击登录按钮。 | 1. 登录成功，进入主界面。<br>2. 界面显示用户已登录状态。                  |
| FT-003   | 用户登出          | 1. 登录状态下，点击登出按钮。                                            | 1. 用户成功登出。<br>2. 界面返回到未登录状态。                            |
| FT-004   | 查看个人资料      | 1. 登录后，进入个人资料页面。                                            | 显示用户的基本信息和统计数据。                                           |
| FT-005   | 更新个人资料      | 1. 进入个人资料页面，修改昵称、邮箱等信息。<br>2. 点击保存按钮。          | 1. 信息更新成功。<br>2. 数据库中用户信息更新。                            |

#### 2. 即时通讯模块
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| FT-006   | 发送消息          | 1. 登录后，选择一个联系人。<br>2. 在消息输入框中输入文本消息。<br>3. 点击发送按钮。 | 1. 消息发送成功。<br>2. 接收方收到消息。                                  |
| FT-007   | 接收消息          | 1. 登录客户端，保持在线状态。<br>2. 其他用户发送消息给当前用户。            | 1. 客户端实时显示新消息。<br>2. 消息存储在数据库中。                      |
| FT-008   | 查看历史消息      | 1. 登录后，选择一个联系人。<br>2. 点击查看历史消息。                       | 显示与该联系人的所有历史消息。                                           |
| FT-009   | 添加联系人        | 1. 登录后，进入联系人管理页面。<br>2. 输入用户ID，点击添加联系人按钮。       | 1. 联系人添加成功。<br>2. 联系人列表中显示新联系人。                      |
| FT-010   | 删除联系人        | 1. 登录后，选择一个联系人。<br>2. 点击删除联系人按钮。                     | 1. 联系人删除成功。<br>2. 联系人列表中不再显示该联系人。                  |

#### 3. 白名单管理模块
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| FT-011   | 提交白名单申请    | 1. 登录后，进入白名单申请页面。<br>2. 填写玩家名、账号类型、申请理由。<br>3. 点击提交按钮。 | 1. 申请提交成功。<br>2. 申请记录存储在文件系统中。                        |
| FT-012   | 审核白名单申请    | 1. 管理员登录，进入白名单审核页面。<br>2. 选择一条待审核申请。<br>3. 点击通过或拒绝按钮。 | 1. 申请状态更新。<br>2. 数据库中白名单状态更新。<br>3. 用户收到审核结果通知。 |

#### 4. 排行榜模块
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| FT-013   | 查看金币排行榜    | 1. 登录后，进入排行榜页面。<br>2. 查看金币排行榜。                        | 显示金币数量排行前100的用户。                                           |
| FT-014   | 查看星星排行榜    | 1. 登录后，进入排行榜页面。<br>2. 查看星星排行榜。                        | 显示星星数量排行前100的用户。                                           |

#### 5. 签到模块
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| FT-015   | 每日签到          | 1. 登录后，进入签到页面。<br>2. 点击签到按钮。                           | 1. 签到成功。<br>2. 用户获得随机奖励（金币或星星）。                      |
| FT-016   | 重复签到          | 1. 签到成功后，再次点击签到按钮。                                        | 显示提示信息：“今日已签到”。                                           |

#### 6. 管理员模块
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| FT-017   | 用户管理          | 1. 管理员登录，进入用户管理页面。<br>2. 查看所有用户列表。<br>3. 修改用户权限或状态。 | 1. 显示所有用户信息。<br>2. 用户权限或状态更新成功。                      |
| FT-018   | 白名单审核        | 1. 管理员登录，进入白名单审核页面。<br>2. 查看所有待审核的白名单申请。<br>3. 审核通过或拒绝申请。 | 1. 显示所有待审核的申请。<br>2. 申请状态更新成功。                        |

### 性能测试用例

#### 1. 响应时间测试
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| PT-001   | 登录响应时间      | 1. 使用有效用户名和密码进行登录。<br>2. 记录从点击登录按钮到进入主界面的时间。 | 平均响应时间不超过1秒。                                                 |
| PT-002   | 消息发送与接收    | 1. 用户A发送消息给用户B。<br>2. 记录用户B收到消息的时间。                   | 消息从发送到接收的平均时间不超过1秒。                                   |

#### 2. 吞吐量测试
| 用例编号 | 测试功能          | 测试步骤                                                                 | 预期结果                                                                 |
|----------|-------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| PT-003   | 消息吞吐量        | 1. 模拟100个并发用户，每个用户每分钟发送10条消息。<br>2. 记录系统每分钟处理的消息数量。 | 系统每分钟至少处理1000条消息。                                           |

## 5.3 测试报告

### 测试结果
#### 功能测试结果
| 用例编号 | 测试结果 | 通过/失败 | 备注 |
|----------|----------|----------|------|
| FT-001   | 用户注册 | 通过     |      |
| FT-002   | 用户登录 | 通过     |      |
| FT-003   | 用户登出 | 通过     |      |
| FT-004   | 查看个人资料 | 通过     |      |
| FT-005   | 更新个人资料 | 通过     |      |
| FT-006   | 发送消息 | 通过     |      |
| FT-007   | 接收消息 | 通过     |      |
| FT-008   | 查看历史消息 | 通过     |      |
| FT-009   | 添加联系人 | 通过     |      |
| FT-010   | 删除联系人 | 通过     |      |
| FT-011   | 提交白名单申请 | 通过     |      |
| FT-012   | 审核白名单申请 | 通过     |      |
| FT-013   | 查看金币排行榜 | 通过     |      |
| FT-014   | 查看星星排行榜 | 通过     |      |
| FT-015   | 每日签到 | 通过     |      |
| FT-016   | 重复签到 | 通过     |      |
| FT-017   | 用户管理 | 通过     |      |
| FT-018   | 白名单审核 | 通过     |      |

#### 性能测试结果
| 用例编号 | 测试结果 | 通过/失败 | 备注 |
|----------|----------|----------|------|
| PT-001   | 登录响应时间 | 通过     | 平均响应时间为0.8秒 |
| PT-002   | 消息发送与接收 | 通过     | 平均响应时间为0.5秒 |
| PT-003   | 消息吞吐量 | 通过     | 每分钟处理1200条消息 |

### 缺陷报告
| 缺陷编号 | 缺陷描述 | 严重程度 | 状态   | 修复版本 | 备注 |
|----------|----------|----------|--------|----------|------|
| DE-001   | 在高并发情况下，消息偶尔丢失 | 高     | 已修复 | v1.0.1 | 优化了消息队列机制 |
| DE-002   | 用户登出后，未读消息计数未重置 | 中     | 已修复 | v1.0.1 | 修复了未读消息计数逻辑 |
| DE-003   | 白名单申请文件存储路径硬编码，不易维护 | 低     | 已修复 | v1.0.1 | 使用配置文件管理路径 |
